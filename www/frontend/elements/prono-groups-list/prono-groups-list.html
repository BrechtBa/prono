
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animations.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-flex-layout/classes/iron-flex-layout.html">

<link rel="import" href="../../elements/default-dialog/default-dialog.html">
<link rel="import" href="../../elements/prono-team-icon/prono-team-icon.html">

<dom-module id="prono-groups-list">
	<template>

		<style>
			:host{
				display: block;
				width: 100%;
			}
			paper-card{
      			margin-bottom: 5px;
				cursor: pointer;
				padding: 10px;
				background: var(--background-secondary-color);
				color: var(--text-secondary-color);
    		}
			paper-button{
				background: var(--button-background-color);
				color: var(--button-text-color);
			}
			paper-button.primary{
				background: var(--button-background-primary-color);
				color: var(--button-text-primary-color);
			}
		</style>

		<template is="dom-repeat" items="{{groupsModel}}" as="group">
			<paper-card elevation="2" class="horizontal layout" on-tap="editGroup">
				<div class="flex">
					<div class="name">{{group.name}}</div>
				</div>
			</paper-card>
		</template>
		<paper-button raised on-tap="add">Add group</paper-button>

		<default-dialog id="edit">
			<paper-input id="name" label="Name:" value="{{group.name}}"></paper-input>
			<div class="buttons">
				<paper-button raised class="primary" on-tap="save">Save</paper-button>
				<paper-button raised on-tap="delete">Delete</paper-button>
			</div>
		</default-dialog>
	

	</template>

	<script>
		Polymer({
			is: 'prono-groups-list',
			properties: {
				groupsModel: {
					type: 'Array',
					notify: true
				}
			},
			ready: function(){
			},
			editGroup: function(e){
				this.group = e.model.__data__.group
				this.$.edit.open();
			},
			save: function(){
				this.$.edit.close();
				app.$.model.$.groupsModel.put(this.group.id+'/',{'name':this.group.name});
			},
			add: function(){
				app.$.model.$.groupsModel.post();
			},
			delete: function(){
				app.$.model.$.groupsModel.delete(this.group.id);
			},

		});
	</script>

</dom-module>
